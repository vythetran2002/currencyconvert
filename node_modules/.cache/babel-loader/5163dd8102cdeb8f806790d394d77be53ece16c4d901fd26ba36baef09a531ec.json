{"ast":null,"code":"// Licensed to the Software Freedom Conservancy (SFC) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The SFC licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\nconst {\n  BrowsingContextInfo,\n  NavigationInfo\n} = require('./browsingContextTypes');\nclass BrowsingContextInspector {\n  constructor(driver, browsingContextIds) {\n    this._driver = driver;\n    this._browsingContextIds = browsingContextIds;\n  }\n  async init() {\n    this.bidi = await this._driver.getBidi();\n  }\n  async onBrowsingContextCreated(callback) {\n    await this.subscribeAndHandleEvent('browsingContext.contextCreated', callback);\n  }\n  async onDomContentLoaded(callback) {\n    await this.subscribeAndHandleEvent('browsingContext.domContentLoaded', callback);\n  }\n  async onBrowsingContextLoaded(callback) {\n    await this.subscribeAndHandleEvent('browsingContext.load', callback);\n  }\n  async subscribeAndHandleEvent(eventType, callback) {\n    if (this._browsingContextIds != null) {\n      await this.bidi.subscribe(eventType, this._browsingContextIds);\n    } else {\n      await this.bidi.subscribe(eventType);\n    }\n    this._on(callback);\n  }\n  async _on(callback) {\n    this.ws = await this.bidi.socket;\n    this.ws.on('message', event => {\n      const {\n        params\n      } = JSON.parse(Buffer.from(event.toString()));\n      if (params) {\n        let response = null;\n        if ('navigation' in params) {\n          response = new NavigationInfo(params.context, params.navigation, params.timestamp, params.url);\n        } else if ('accepted' in params) {\n          /* Needs to be updated when browsers implement other events */\n        } else {\n          response = new BrowsingContextInfo(params.context, params.url, params.children, params.parent);\n        }\n        callback(response);\n      }\n    });\n  }\n}\nasync function getBrowsingContextInstance(driver) {\n  let browsingContextIds = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  let instance = new BrowsingContextInspector(driver, browsingContextIds);\n  await instance.init();\n  return instance;\n}\nmodule.exports = getBrowsingContextInstance;","map":{"version":3,"names":["BrowsingContextInfo","NavigationInfo","require","BrowsingContextInspector","constructor","driver","browsingContextIds","_driver","_browsingContextIds","init","bidi","getBidi","onBrowsingContextCreated","callback","subscribeAndHandleEvent","onDomContentLoaded","onBrowsingContextLoaded","eventType","subscribe","_on","ws","socket","on","event","params","JSON","parse","Buffer","from","toString","response","context","navigation","timestamp","url","children","parent","getBrowsingContextInstance","arguments","length","undefined","instance","module","exports"],"sources":["/Users/Shared/ATS Git/ATSDemo/ReactJs/ReactCaseStudy/my-app/node_modules/selenium-webdriver/bidi/browsingContextInspector.js"],"sourcesContent":["// Licensed to the Software Freedom Conservancy (SFC) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The SFC licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\nconst {\n  BrowsingContextInfo,\n  NavigationInfo,\n} = require('./browsingContextTypes')\n\nclass BrowsingContextInspector {\n  constructor(driver, browsingContextIds) {\n    this._driver = driver\n    this._browsingContextIds = browsingContextIds\n  }\n\n  async init() {\n    this.bidi = await this._driver.getBidi()\n  }\n\n  async onBrowsingContextCreated(callback) {\n    await this.subscribeAndHandleEvent(\n      'browsingContext.contextCreated',\n      callback\n    )\n  }\n\n  async onDomContentLoaded(callback) {\n    await this.subscribeAndHandleEvent(\n      'browsingContext.domContentLoaded',\n      callback\n    )\n  }\n\n  async onBrowsingContextLoaded(callback) {\n    await this.subscribeAndHandleEvent('browsingContext.load', callback)\n  }\n\n  async subscribeAndHandleEvent(eventType, callback) {\n    if (this._browsingContextIds != null) {\n      await this.bidi.subscribe(eventType, this._browsingContextIds)\n    } else {\n      await this.bidi.subscribe(eventType)\n    }\n    this._on(callback)\n  }\n\n  async _on(callback) {\n    this.ws = await this.bidi.socket\n    this.ws.on('message', (event) => {\n      const { params } = JSON.parse(Buffer.from(event.toString()))\n      if (params) {\n        let response = null\n        if ('navigation' in params) {\n          response = new NavigationInfo(\n            params.context,\n            params.navigation,\n            params.timestamp,\n            params.url\n          )\n        } else if ('accepted' in params) {\n          /* Needs to be updated when browsers implement other events */\n        } else {\n          response = new BrowsingContextInfo(\n            params.context,\n            params.url,\n            params.children,\n            params.parent\n          )\n        }\n        callback(response)\n      }\n    })\n  }\n}\n\nasync function getBrowsingContextInstance(driver, browsingContextIds = null) {\n  let instance = new BrowsingContextInspector(driver, browsingContextIds)\n  await instance.init()\n  return instance\n}\n\nmodule.exports = getBrowsingContextInstance\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM;EACJA,mBAAmB;EACnBC;AACF,CAAC,GAAGC,OAAO,CAAC,wBAAwB,CAAC;AAErC,MAAMC,wBAAwB,CAAC;EAC7BC,WAAWA,CAACC,MAAM,EAAEC,kBAAkB,EAAE;IACtC,IAAI,CAACC,OAAO,GAAGF,MAAM;IACrB,IAAI,CAACG,mBAAmB,GAAGF,kBAAkB;EAC/C;EAEA,MAAMG,IAAIA,CAAA,EAAG;IACX,IAAI,CAACC,IAAI,GAAG,MAAM,IAAI,CAACH,OAAO,CAACI,OAAO,CAAC,CAAC;EAC1C;EAEA,MAAMC,wBAAwBA,CAACC,QAAQ,EAAE;IACvC,MAAM,IAAI,CAACC,uBAAuB,CAChC,gCAAgC,EAChCD,QACF,CAAC;EACH;EAEA,MAAME,kBAAkBA,CAACF,QAAQ,EAAE;IACjC,MAAM,IAAI,CAACC,uBAAuB,CAChC,kCAAkC,EAClCD,QACF,CAAC;EACH;EAEA,MAAMG,uBAAuBA,CAACH,QAAQ,EAAE;IACtC,MAAM,IAAI,CAACC,uBAAuB,CAAC,sBAAsB,EAAED,QAAQ,CAAC;EACtE;EAEA,MAAMC,uBAAuBA,CAACG,SAAS,EAAEJ,QAAQ,EAAE;IACjD,IAAI,IAAI,CAACL,mBAAmB,IAAI,IAAI,EAAE;MACpC,MAAM,IAAI,CAACE,IAAI,CAACQ,SAAS,CAACD,SAAS,EAAE,IAAI,CAACT,mBAAmB,CAAC;IAChE,CAAC,MAAM;MACL,MAAM,IAAI,CAACE,IAAI,CAACQ,SAAS,CAACD,SAAS,CAAC;IACtC;IACA,IAAI,CAACE,GAAG,CAACN,QAAQ,CAAC;EACpB;EAEA,MAAMM,GAAGA,CAACN,QAAQ,EAAE;IAClB,IAAI,CAACO,EAAE,GAAG,MAAM,IAAI,CAACV,IAAI,CAACW,MAAM;IAChC,IAAI,CAACD,EAAE,CAACE,EAAE,CAAC,SAAS,EAAGC,KAAK,IAAK;MAC/B,MAAM;QAAEC;MAAO,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACC,MAAM,CAACC,IAAI,CAACL,KAAK,CAACM,QAAQ,CAAC,CAAC,CAAC,CAAC;MAC5D,IAAIL,MAAM,EAAE;QACV,IAAIM,QAAQ,GAAG,IAAI;QACnB,IAAI,YAAY,IAAIN,MAAM,EAAE;UAC1BM,QAAQ,GAAG,IAAI7B,cAAc,CAC3BuB,MAAM,CAACO,OAAO,EACdP,MAAM,CAACQ,UAAU,EACjBR,MAAM,CAACS,SAAS,EAChBT,MAAM,CAACU,GACT,CAAC;QACH,CAAC,MAAM,IAAI,UAAU,IAAIV,MAAM,EAAE;UAC/B;QAAA,CACD,MAAM;UACLM,QAAQ,GAAG,IAAI9B,mBAAmB,CAChCwB,MAAM,CAACO,OAAO,EACdP,MAAM,CAACU,GAAG,EACVV,MAAM,CAACW,QAAQ,EACfX,MAAM,CAACY,MACT,CAAC;QACH;QACAvB,QAAQ,CAACiB,QAAQ,CAAC;MACpB;IACF,CAAC,CAAC;EACJ;AACF;AAEA,eAAeO,0BAA0BA,CAAChC,MAAM,EAA6B;EAAA,IAA3BC,kBAAkB,GAAAgC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;EACzE,IAAIG,QAAQ,GAAG,IAAItC,wBAAwB,CAACE,MAAM,EAAEC,kBAAkB,CAAC;EACvE,MAAMmC,QAAQ,CAAChC,IAAI,CAAC,CAAC;EACrB,OAAOgC,QAAQ;AACjB;AAEAC,MAAM,CAACC,OAAO,GAAGN,0BAA0B"},"metadata":{},"sourceType":"script","externalDependencies":[]}